<app-header></app-header>
<main>
  <p class="text">
    Ao enviar uma mensagem para alguém que está doando um pet, essas informações ficarão disponíveis
  </p>

  <form [formGroup]="addPetForm" (keyup.enter)="submit()">
    <h1>Perfil</h1>

    <div class="input-label">
      <label for="">Foto</label>
      <div class="input-file-container">
        <label class="input-picture-box" for="picture">
          <ng-container *ngIf="!addPetForm.get('picture')?.value; else imageTemplate">
            <mat-icon class="picture-img" fontIcon="account_circle"></mat-icon>
          </ng-container>
          <ng-template #imageTemplate>
            <img
              class="picture-img"
              [src]="addPetForm.get('picture')?.value"
              [alt]="addPetForm.value.name"
            />
          </ng-template>
        </label>

        <input
          class="input-file"
          id="picture"
          name="picture"
          type="file"
          accept="image/jpeg, image/png"
          (change)="onFileSelected($event)"
        />
      </div>

      <ng-container *ngIf="addPetForm.get('picture')?.hasError('fileSizeExceeded')"
        ><span class="error-message" style="align-self: center">{{
          errorMessages.fileSizeExceeded
        }}</span>
      </ng-container>
      <ng-container *ngIf="addPetForm.get('picture')?.hasError('fileUnsupported')"
        ><span class="error-message" style="align-self: center">{{
          errorMessages.fileUnsupported
        }}</span>
      </ng-container>

      <p class="picture-text">Clique na foto para editar</p>
    </div>

    <div class="input-label">
      <label for="firstName">Nome</label>
      <input
        class="input-text"
        id="firstName"
        name="firstName"
        type="text"
        formControlName="firstName"
        placeholder="Digite seu nome"
        [maxlength]="inputValidations.maxLengthForm"
        [ngClass]="{
          'border-error': addPetForm.get('firstName')?.errors && formSubmitted
        }"
      />
      <ng-container
        *ngIf="
          (addPetForm.get('firstName')?.hasError('required') ||
            addPetForm.get('firstName')?.hasError('minlength')) &&
          formSubmitted
        "
      >
        <span class="error-message">{{ errorMessages.minlength }}</span>
      </ng-container>
      <ng-container
        *ngIf="addPetForm.get('firstName')?.hasError('validName') && formSubmitted"
      >
        <span class="error-message">{{ errorMessages.validName }}</span>
      </ng-container>
    </div>

    <div class="input-label">
      <label for="lastName">Sobrenome</label>
      <input
        class="input-text"
        id="lastName"
        name="lastName"
        type="text"
        formControlName="lastName"
        placeholder="Digite seu sobrenome"
        [maxlength]="inputValidations.maxLengthForm"
        [ngClass]="{
          'border-error': addPetForm.get('lastName')?.errors && formSubmitted
        }"
      />
      <ng-container
        *ngIf="
          (addPetForm.get('lastName')?.hasError('required') ||
            addPetForm.get('lastName')?.hasError('minlength')) &&
          formSubmitted
        "
        ><span class="error-message">{{ errorMessages.minlength }}</span>
      </ng-container>
      <ng-container *ngIf="addPetForm.get('lastName')?.hasError('validName') && formSubmitted">
        <span class="error-message">{{ errorMessages.validName }}</span>
      </ng-container>
    </div>

    <div class="input-label">
      <label for="city">Cidade</label>
      <input
        class="input-text"
        id="city"
        name="city"
        type="text"
        formControlName="city"
        placeholder="Digite sua cidade"
        [maxlength]="inputValidations.maxLengthForm"
        [ngClass]="{
          'border-error': addPetForm.get('city')?.errors && formSubmitted
        }"
      />
      <ng-container
        *ngIf="
          (addPetForm.get('city')?.hasError('required') ||
            addPetForm.get('city')?.hasError('minlength')) &&
          formSubmitted
        "
        ><span class="error-message">{{ errorMessages.minlength }}</span>
      </ng-container>
    </div>


    <app-button (click)="submit()" [buttonConfig]="buttonRegister"></app-button>
    <app-button (click)="submit()" [buttonConfig]="buttonDelete"></app-button>
  </form>
</main>
